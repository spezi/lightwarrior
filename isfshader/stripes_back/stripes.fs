/*{
  "CATEGORIES": ["Video"],
  "INPUTS": [
    { "NAME": "inputImage", "TYPE": "image" },
    { "NAME": "start0", "TYPE": "point2D", "DEFAULT": [0.02, 0.0] },
    { "NAME": "end0",   "TYPE": "point2D", "DEFAULT": [0.02, 1.0] },
    { "NAME": "start1", "TYPE": "point2D", "DEFAULT": [0.07, 0.0] },
    { "NAME": "end1",   "TYPE": "point2D", "DEFAULT": [0.07, 1.0] },
    { "NAME": "start2", "TYPE": "point2D", "DEFAULT": [0.11, 0.0] },
    { "NAME": "end2",   "TYPE": "point2D", "DEFAULT": [0.11, 1.0] },
    { "NAME": "start3", "TYPE": "point2D", "DEFAULT": [0.16, 0.0] },
    { "NAME": "end3",   "TYPE": "point2D", "DEFAULT": [0.16, 1.0] },
    { "NAME": "start4", "TYPE": "point2D", "DEFAULT": [0.20, 0.0] },
    { "NAME": "end4",   "TYPE": "point2D", "DEFAULT": [0.20, 1.0] },
    { "NAME": "start5", "TYPE": "point2D", "DEFAULT": [0.25, 0.0] },
    { "NAME": "end5",   "TYPE": "point2D", "DEFAULT": [0.25, 1.0] },
    { "NAME": "start6", "TYPE": "point2D", "DEFAULT": [0.29, 0.0] },
    { "NAME": "end6",   "TYPE": "point2D", "DEFAULT": [0.29, 1.0] },
    { "NAME": "start7", "TYPE": "point2D", "DEFAULT": [0.34, 0.0] },
    { "NAME": "end7",   "TYPE": "point2D", "DEFAULT": [0.34, 1.0] },
    { "NAME": "start8", "TYPE": "point2D", "DEFAULT": [0.38, 0.0] },
    { "NAME": "end8",   "TYPE": "point2D", "DEFAULT": [0.38, 1.0] },
    { "NAME": "start9", "TYPE": "point2D", "DEFAULT": [0.43, 0.0] },
    { "NAME": "end9",   "TYPE": "point2D", "DEFAULT": [0.43, 1.0] },
    { "NAME": "start10", "TYPE": "point2D", "DEFAULT": [0.47, 0.0] },
    { "NAME": "end10",  "TYPE": "point2D", "DEFAULT": [0.47, 1.0] },
    { "NAME": "start11", "TYPE": "point2D", "DEFAULT": [0.52, 0.0] },
    { "NAME": "end11",  "TYPE": "point2D", "DEFAULT": [0.52, 1.0] },
    { "NAME": "start12", "TYPE": "point2D", "DEFAULT": [0.56, 0.0] },
    { "NAME": "end12",  "TYPE": "point2D", "DEFAULT": [0.56, 1.0] },
    { "NAME": "start13", "TYPE": "point2D", "DEFAULT": [0.61, 0.0] },
    { "NAME": "end13",  "TYPE": "point2D", "DEFAULT": [0.61, 1.0] },
    { "NAME": "start14", "TYPE": "point2D", "DEFAULT": [0.65, 0.0] },
    { "NAME": "end14",  "TYPE": "point2D", "DEFAULT": [0.65, 1.0] },
    { "NAME": "start15", "TYPE": "point2D", "DEFAULT": [0.70, 0.0] },
    { "NAME": "end15",  "TYPE": "point2D", "DEFAULT": [0.70, 1.0] },
    { "NAME": "start16", "TYPE": "point2D", "DEFAULT": [0.74, 0.0] },
    { "NAME": "end16",  "TYPE": "point2D", "DEFAULT": [0.74, 1.0] },
    { "NAME": "start17", "TYPE": "point2D", "DEFAULT": [0.79, 0.0] },
    { "NAME": "end17",  "TYPE": "point2D", "DEFAULT": [0.79, 1.0] },
    { "NAME": "start18", "TYPE": "point2D", "DEFAULT": [0.83, 0.0] },
    { "NAME": "end18",  "TYPE": "point2D", "DEFAULT": [0.83, 1.0] },
    { "NAME": "start19", "TYPE": "point2D", "DEFAULT": [0.88, 0.0] },
    { "NAME": "end19",  "TYPE": "point2D", "DEFAULT": [0.88, 1.0] },
    { "NAME": "start20", "TYPE": "point2D", "DEFAULT": [0.92, 0.0] },
    { "NAME": "end20",  "TYPE": "point2D", "DEFAULT": [0.92, 1.0] },
    { "NAME": "start21", "TYPE": "point2D", "DEFAULT": [0.97, 0.0] },
    { "NAME": "end21",  "TYPE": "point2D", "DEFAULT": [0.97, 1.0] },
    { "NAME": "start22", "TYPE": "point2D", "DEFAULT": [0.99, 0.0] },
    { "NAME": "end22",  "TYPE": "point2D", "DEFAULT": [0.99, 1.0] },
    { "NAME": "start23", "TYPE": "point2D", "DEFAULT": [0.02, 0.0] },
    { "NAME": "end23",  "TYPE": "point2D", "DEFAULT": [0.02, 1.0] },
    { "NAME": "start24", "TYPE": "point2D", "DEFAULT": [0.07, 0.0] },
    { "NAME": "end24",  "TYPE": "point2D", "DEFAULT": [0.07, 1.0] },
    { "NAME": "start25", "TYPE": "point2D", "DEFAULT": [0.11, 0.0] },
    { "NAME": "end25",  "TYPE": "point2D", "DEFAULT": [0.11, 1.0] },
    { "NAME": "start26", "TYPE": "point2D", "DEFAULT": [0.16, 0.0] },
    { "NAME": "end26",  "TYPE": "point2D", "DEFAULT": [0.16, 1.0] },
    { "NAME": "start27", "TYPE": "point2D", "DEFAULT": [0.20, 0.0] },
    { "NAME": "end27",  "TYPE": "point2D", "DEFAULT": [0.20, 1.0] },
    { "NAME": "start28", "TYPE": "point2D", "DEFAULT": [0.25, 0.0] },
    { "NAME": "end28",  "TYPE": "point2D", "DEFAULT": [0.25, 1.0] },
    { "NAME": "start29", "TYPE": "point2D", "DEFAULT": [0.29, 0.0] },
    { "NAME": "end29",  "TYPE": "point2D", "DEFAULT": [0.29, 1.0] },
    { "NAME": "start30", "TYPE": "point2D", "DEFAULT": [0.34, 0.0] },
    { "NAME": "end30",  "TYPE": "point2D", "DEFAULT": [0.34, 1.0] },
    { "NAME": "start31", "TYPE": "point2D", "DEFAULT": [0.34, 0.0] },
    { "NAME": "end31",  "TYPE": "point2D", "DEFAULT": [0.34, 1.0] } 
  ]
}*/

void main() {
  vec2 uv = isf_FragNormCoord;
  float bandWidth = 10.0 / float(RENDERSIZE.x);
  float bandHeight = 0.5;
  float bandTop = 0.5 - bandHeight / 2.0;
  float bandBottom = 0.5 + bandHeight / 2.0;
  float spacing = 1.0 / 31.0;
  float halfBand = bandWidth / 2.0;

  vec4 result = vec4(0.0);

  for (int i = 0; i < 31; i++) {
    float cx = (float(i) + 0.5) * spacing;

    if (uv.x >= cx - halfBand && uv.x <= cx + halfBand && uv.y >= bandTop && uv.y <= bandBottom) {
      float t = (uv.y - bandTop) / (bandBottom - bandTop);

      vec2 start, end;

      if (i == 0) { start = start0; end = end0; }
      else if (i == 1) { start = start1; end = end1; }
      else if (i == 2) { start = start2; end = end2; }
      else if (i == 3) { start = start3; end = end3; }
      else if (i == 4) { start = start4; end = end4; }
      else if (i == 5) { start = start5; end = end5; }
      else if (i == 6) { start = start6; end = end6; }
      else if (i == 7) { start = start7; end = end7; }
      else if (i == 8) { start = start8; end = end8; }
      else if (i == 9) { start = start9; end = end9; }
      else if (i == 10) { start = start10; end = end10; }
      else if (i == 11) { start = start11; end = end11; }
      else if (i == 12) { start = start12; end = end12; }
      else if (i == 13) { start = start13; end = end13; }
      else if (i == 14) { start = start14; end = end14; }
      else if (i == 15) { start = start15; end = end15; }
      else if (i == 16) { start = start16; end = end16; }
      else if (i == 17) { start = start17; end = end17; }
      else if (i == 18) { start = start18; end = end18; }
      else if (i == 19) { start = start19; end = end19; }
      else if (i == 20) { start = start20; end = end20; }
      else if (i == 21) { start = start21; end = end21; }
      else if (i == 22) { start = start22; end = end22; }
      else if (i == 23) { start = start23; end = end23; }
      else if (i == 24) { start = start24; end = end24; }
      else if (i == 25) { start = start25; end = end25; }
      else if (i == 26) { start = start26; end = end26; }
      else if (i == 27) { start = start27; end = end27; }
      else if (i == 28) { start = start28; end = end28; }
      else if (i == 29) { start = start29; end = end29; }
      else if (i == 30) { start = start30; end = end30; }      

      vec2 sampleUV = mix(start, end, t);
      result = IMG_NORM_PIXEL(inputImage, sampleUV);
      break;
    }
  }

  gl_FragColor = result;
}
